<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Olympiad</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="supabase.min.js?v=1"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css?v=15">
</head>
<body>

    <div class="screen hidden" id="profile-screen">
        <div class="header-profile">
            <div class="user-avatar-small">
                <i class="fa-solid fa-user"></i>
                <div class="online-badge"></div>
            </div>
            <h1>–ü—Ä–æ—Ñ–∏–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</h1>
            <p id="profile-desc">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É—á–∞—Å—Ç–∏—è</p>
            <div class="progress-bar-line"><div class="fill" style="width: 20%"></div></div>
        </div>

        <div class="container pb-large">
            <div class="card profile-info-card">
                <div class="avatar-circle">
                    <img src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png" alt="User">
                    <div class="verified-badge"><i class="fa-solid fa-check"></i></div>
                </div>
                <div class="profile-text">
                    <span class="sub-label">–í—ã –≤–æ—à–ª–∏ –∫–∞–∫</span>
                    <h3 id="profile-user-name">–£—á–∞—Å—Ç–Ω–∏–∫</h3>
                </div>
            </div>

            <div class="form-group">
                <label>–ö–ª–∞—Å—Å –æ–±—É—á–µ–Ω–∏—è</label>
                <div class="input-wrapper">
                    <select id="class-select"></select>
                    <i class="fa-solid fa-chevron-down arrow-icon"></i>
                </div>
            </div>

            <div class="form-group">
                <label>–†–µ–≥–∏–æ–Ω</label>
                <div class="input-wrapper">
                    <select id="region-select"></select>
                    <i class="fa-solid fa-location-dot icon-right"></i>
                </div>
            </div>

            <div class="form-group">
                <label>–†–∞–π–æ–Ω / –ì–æ—Ä–æ–¥</label>
                <div class="input-wrapper">
                    <select id="district-select" disabled></select>
                    <i class="fa-solid fa-map icon-right"></i>
                </div>
            </div>

            <div class="form-group">
                <label>–®–∫–æ–ª–∞</label>
                <div class="input-wrapper">
                    <input type="text" id="school-input" placeholder="‚Ññ 1535 –∏–ª–∏ –ù–∞–∑–≤–∞–Ω–∏–µ">
                    <i class="fa-solid fa-graduation-cap icon-right"></i>
                </div>
            </div>

            <div class="card checkbox-card">
                <input type="checkbox" id="research-consent">
                <div class="checkbox-text">
                    <strong>–°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏</strong>
                    <span>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.</span>
                </div>
            </div>
        </div>

        <div class="bottom-fixed">
            <button id="save-profile" class="btn-primary">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å <i class="fa-solid fa-arrow-right"></i>
            </button>
            <div id="profile-locked-msg" class="locked-message hidden">
                <i class="fa-solid fa-lock"></i>
                <span>–î–∞–Ω–Ω—ã–µ –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É.</span>
            </div>
            <button id="profile-back-btn" class="btn-secondary hidden" style="margin-top: 10px;">
                <i class="fa-solid fa-arrow-left"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
            </button>
        </div>
    </div>

    <div class="screen hidden" id="home-screen">
        <div class="top-bar">
            <div class="logo-area">
                <div class="logo-icon"><i class="fa-solid fa-graduation-cap"></i></div>
                <span>Smart Olympiad</span>
            </div>
            <div class="profile-icon-btn" id="open-profile-btn">
                <i class="fa-regular fa-user"></i>
            </div>
        </div>

        <div class="container pb-extra-large">
            <h1 class="greeting">–ü—Ä–∏–≤–µ—Ç, <span id="home-user-name">–£—á–∞—Å—Ç–Ω–∏–∫</span>! üëã</h1>
            <p class="subtitle">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –æ–Ω–ª–∞–π–Ω-–æ–ª–∏–º–ø–∏–∞–¥—É.</p>

            <div class="action-grid">
                <div class="action-card" id="leaderboard-btn">
                    <div class="icon-circle gold"><i class="fa-solid fa-trophy"></i></div>
                    <span>–õ–∏–¥–µ—Ä–±–æ—Ä–¥</span>
                </div>
                <div class="action-card" id="about-btn">
                    <div class="icon-circle purple"><i class="fa-solid fa-info"></i></div>
                    <span>–û –ø—Ä–æ–µ–∫—Ç–µ</span>
                </div>
            </div>

            <div class="section-header">
                <h2>–ü—Ä–µ–¥–º–µ—Ç—ã</h2>
            </div>

            <div class="subjects-grid">
                <div class="subject-card" onclick="openSubjectStats('–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞')">
                    <div class="subject-top"><div class="sub-icon blue"><i class="fa-solid fa-calculator"></i></div></div>
                    <h3>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h3>
                </div>
                
                <div class="subject-card" onclick="openSubjectStats('–•–∏–º–∏—è')">
                    <div class="subject-top"><div class="sub-icon teal"><i class="fa-solid fa-flask"></i></div></div>
                    <h3>–•–∏–º–∏—è</h3>
                </div>

                <div class="subject-card" onclick="openSubjectStats('–ë–∏–æ–ª–æ–≥–∏—è')">
                    <div class="subject-top"><div class="sub-icon green"><i class="fa-solid fa-leaf"></i></div></div>
                    <h3>–ë–∏–æ–ª–æ–≥–∏—è</h3>
                </div>

                <div class="subject-card" onclick="openSubjectStats('–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞')">
                    <div class="subject-top"><div class="sub-icon cyan"><i class="fa-solid fa-laptop-code"></i></div></div>
                    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</h3>
                </div>

                <div class="subject-card" onclick="openSubjectStats('–≠–∫–æ–Ω–æ–º–∏–∫–∞')">
                    <div class="subject-top"><div class="sub-icon orange"><i class="fa-solid fa-chart-line"></i></div></div>
                    <h3>–≠–∫–æ–Ω–æ–º–∏–∫–∞</h3>
                </div>

                <div class="subject-card" onclick="openSubjectStats('SAT/IELTS')">
                    <div class="subject-top"><div class="sub-icon violet"><i class="fa-solid fa-graduation-cap"></i></div></div>
                    <h3>SAT / IELTS</h3>
                </div>
            </div>

            <div class="section-header" style="margin-top: 30px;">
                <h2>–†–µ—Å—É—Ä—Å—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏</h2>
            </div>

            <div class="resources-list">
                <div class="resource-card" onclick="openExternalLink('https://youtube.com')">
                    <div class="res-icon youtube"><i class="fa-brands fa-youtube"></i></div>
                    <div class="res-info"><h4>–í–∏–¥–µ–æ—É—Ä–æ–∫–∏</h4><p>–†–∞–∑–±–æ—Ä—ã –∑–∞–¥–∞—á –ø–æ –≤—Å–µ–º —Ç–µ–º–∞–º</p></div>
                    <i class="fa-solid fa-chevron-right arrow"></i>
                </div>
                <div class="resource-card" onclick="openExternalLink('https://t.me/your_channel')">
                    <div class="res-icon telegram"><i class="fa-solid fa-bullhorn"></i></div>
                    <div class="res-info"><h4>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª</h4><p>–ù–æ–≤–æ—Å—Ç–∏ –∏ –∞–Ω–æ–Ω—Å—ã —Ç—É—Ä–æ–≤</p></div>
                    <i class="fa-solid fa-chevron-right arrow"></i>
                </div>
                <div class="resource-card" onclick="openExternalLink('https://t.me/your_group')">
                    <div class="res-icon group"><i class="fa-solid fa-users"></i></div>
                    <div class="res-info"><h4>–ß–∞—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</h4><p>–û–±—Å—É–∂–¥–µ–Ω–∏–µ –∏ –ø–æ–º–æ—â—å</p></div>
                    <i class="fa-solid fa-chevron-right arrow"></i>
                </div>
            </div>

        </div> 

        <div class="bottom-fixed column">
            <button id="start-tour" class="btn-primary">
                <i class="fa-solid fa-play"></i> –ù–∞—á–∞—Ç—å —Ç—É—Ä
            </button>
            <button id="exit-app-btn" class="btn-danger-box">
                <i class="fa-solid fa-right-from-bracket"></i> –í—ã—Ö–æ–¥
            </button>
        </div>
    </div>

    <div class="screen hidden" id="quiz-screen">
        <div class="quiz-top-bar">
            <div class="timer-badge">
                <i class="fa-regular fa-clock"></i> <span id="timer">00:00</span>
            </div>
            <div class="q-counter"><span id="question-number">1</span> / <span id="total-q-count">15</span></div>
        </div>
        <div class="quiz-progress"><div class="fill" id="quiz-progress-fill" style="width: 0%;"></div></div>

        <div class="container quiz-container pb-large">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <div class="subject-badge" id="subject-tag">–ü–†–ï–î–ú–ï–¢</div>
                <div class="time-hint" id="q-time-hint"><i class="fa-solid fa-hourglass-half"></i> ~1 –º–∏–Ω</div>
            </div>
            
            <h2 id="question-text" class="question-title">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            
            <div id="options-container" class="options-list"></div>
        </div>

        <div class="bottom-fixed">
            <button id="next-button" class="btn-primary" disabled>
                –î–∞–ª–µ–µ <i class="fa-solid fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <div class="screen hidden" id="result-screen">
        <div class="header-simple sticky-header">
            <div class="close-icon" id="back-home-x"><i class="fa-solid fa-times"></i></div>
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç—É—Ä–∞</h3>
        </div>

        <div class="container result-content">
            <div class="result-chart-wrapper">
                <div class="circular-chart" id="result-circle">
                    <div class="inner-circle">
                        <span class="percent-text" id="result-percent">0%</span>
                    </div>
                </div>
                <h2>–¢—É—Ä –∑–∞–≤–µ—Ä—à—ë–Ω!</h2>
                <p style="color: #8E8E93; margin-top: 5px;">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω</p>
            </div>

            <div class="stats-row">
                <div class="stat-box">
                    <div class="icon blue"><i class="fa-solid fa-check"></i></div>
                    <div class="val" id="stat-correct">0</div>
                    <div class="lbl">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                </div>
                <div class="stat-box">
                    <div class="icon blue"><i class="fa-solid fa-layer-group"></i></div>
                    <div class="val" id="stat-total-q">15</div>
                    <div class="lbl">–í—Å–µ–≥–æ</div>
                </div>
            </div>
        </div>

        <div class="bottom-fixed column">
            <button class="btn-secondary" id="download-certificate-btn">
                <i class="fa-solid fa-download"></i> –°–∫–∞—á–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
            </button>
            <button class="btn-primary" id="back-home">
                –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </button>
        </div>
    </div>

    <div class="screen hidden" id="leaderboard-screen">
        <div class="header-simple sticky-header">
            <div class="back-btn" id="lb-back"><i class="fa-solid fa-arrow-left"></i></div>
            <h3>–õ–∏–¥–µ—Ä–±–æ—Ä–¥ —Ç—É—Ä–∞</h3>
        </div>
        
        <div class="container pb-large" style="padding-top: 20px;">
            <div id="lb-podium" class="top-three">
               <p style="text-align: center; width: 100%; color: #8E8E93;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
            
            <div class="list-header">
                <span>–£–ß–ê–°–¢–ù–ò–ö</span>
                <span>–ë–ê–õ–õ–´</span>
            </div>

            <div id="lb-list" class="leader-list"></div>
        </div>
    </div>

    <div class="modal hidden" id="subject-modal">
        <div class="modal-card">
            <div class="modal-handle"></div>
            <div class="modal-icon-big" id="sm-icon-bg"><i class="fa-solid fa-book" id="sm-icon"></i></div>
            <h2 id="sm-title">–ü—Ä–µ–¥–º–µ—Ç</h2>
            
            <div class="stats-row" style="margin-bottom: 20px; margin-top: 20px;">
                <div class="stat-box">
                    <div class="val" id="sm-correct">0</div>
                    <div class="lbl">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                </div>
                <div class="stat-box">
                    <div class="val" id="sm-total">0</div>
                    <div class="lbl">–í–æ–ø—Ä–æ—Å–æ–≤</div>
                </div>
            </div>

            <button class="btn-primary" onclick="document.getElementById('subject-modal').classList.add('hidden')">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div class="modal hidden" id="warning-modal">
        <div class="modal-card">
            <div class="modal-icon-big"><i class="fa-solid fa-stopwatch"></i><div class="alert-badge">!</div></div>
            <h2>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ç—É—Ä–æ–º</h2>
            <p>–£ –≤–∞—Å –±—É–¥–µ—Ç <strong id="warn-time-val">...</strong> –Ω–∞ <strong id="warn-q-val">...</strong>.</p>
            <div class="alert-box">
                <i class="fa-solid fa-triangle-exclamation"></i>
                <p>–ü–æ–≤—Ç–æ—Ä —Ç—É—Ä–∞ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ —Å–≤—è–∑–∏.</p>
            </div>
            <button id="confirm-start" class="btn-primary">–ù–∞—á–∞—Ç—å —Ç—É—Ä <i class="fa-solid fa-arrow-right"></i></button>
            <button id="cancel-start" class="btn-text">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <div class="modal hidden" id="tour-completed-modal">
        <div class="modal-card">
            <div class="modal-icon-big"><i class="fa-solid fa-check-double"></i><div class="alert-badge" style="background:#34C759"><i class="fa-solid fa-check"></i></div></div>
            <h2>–¢—É—Ä —É–∂–µ –ø—Ä–æ–π–¥–µ–Ω!</h2>
            <p>–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —ç—Ç–æ—Ç —ç—Ç–∞–ø.</p>
            <div class="alert-box" style="background: #F2F9FF; color: #007AFF;">
                <i class="fa-solid fa-graduation-cap"></i>
                <p>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç—É—Ä—É –ø–æ –≤–∏–¥–µ–æ—É—Ä–æ–∫–∞–º.</p>
            </div>
            <button class="btn-primary" onclick="document.getElementById('tour-completed-modal').classList.add('hidden')">–ü–æ–Ω—è—Ç–Ω–æ</button>
        </div>
    </div>

    <div class="modal hidden" id="about-modal">
        <div class="modal-card full-height">
            <div class="modal-header">
                <h3>–û –ø—Ä–æ–µ–∫—Ç–µ</h3>
                <div class="close-btn" id="close-about"><i class="fa-solid fa-times"></i></div>
            </div>
            <div class="modal-body-scroll">
                <div class="blue-banner">
                    <span class="tag">ONLINE</span>
                    <h1>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –æ–ª–∏–º–ø–∏–∞–¥–∞</h1>
                </div>
                <p class="desc">–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Cambridge.</p>
            </div>
        </div>
    </div>

    <script src="script.js?v=15"></script>
</body>
</html>
