<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Олимпиада Cambridge</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="supabase.min.js?v=1"></script>
  <link rel="stylesheet" href="style.css?v=2">
</head>
<body>

  <!-- Главный экран -->
  <div class="screen" id="home-screen">
    <div class="container">
      <h1>Привет, <span id="user-name">участник</span>!</h1>
      <p class="description">Межпредметная олимпиада Cambridge-уровня</p>

      <div class="progress-grid" id="progress-grid">
        <!-- Карточки предметов будут добавлены в JS -->
      </div>

      <button id="start-tour" class="big-button">Начать тур</button>
      <button id="leaderboard-btn" class="big-button secondary">Лидерборд</button>
      <button id="about-btn" class="big-button secondary">О проекте</button>
    </div>
  </div>

  <!-- Экран профиля (обязательный) -->
  <div class="screen hidden" id="profile-screen">
    <div class="container">
      <h1>Завершите профиль</h1>
      <p class="description">Это необходимо для участия и сертификата</p>

      <div class="form-group">
        <label>Класс</label>
        <select id="class-select">
          <option value="">Выберите класс</option>
          <option value="1">1 класс</option>
          <option value="2">2 класс</option>
          <option value="3">3 класс</option>
          <option value="4">4 класс</option>
          <option value="5">5 класс</option>
          <option value="6">6 класс</option>
          <option value="7">7 класс</option>
          <option value="8">8 класс</option>
          <option value="9">9 класс</option>
          <option value="10">10 класс</option>
          <option value="11">11 класс</option>
        </select>
      </div>

      <div class="form-group">
        <label>Регион</label>
        <select id="region-select">
          <option value="">Выберите регион</option>
          <!-- Заполняется в script.js -->
        </select>
      </div>

      <div class="form-group">
        <label>Район / Город</label>
        <select id="district-select" disabled>
          <option value="">Сначала выберите регион</option>
        </select>
      </div>

      <div class="form-group">
        <label>Школа</label>
        <input type="text" id="school-input" placeholder="Название школы">
      </div>

      <div class="form-group checkbox">
        <label>
          <input type="checkbox" id="research-consent">
          Согласен на участие в анонимном исследовании (добровольно)
        </label>
      </div>

      <button id="save-profile" class="big-button" disabled>Сохранить и продолжить</button>
    </div>
  </div>

  <!-- Экран викторины -->
  <div class="screen hidden" id="quiz-screen">
    <div class="container">
      <div class="quiz-header">
        <div class="progress-top">
          <span id="question-number">1</span> / <span id="total-questions">15</span>
          <span id="timer" class="timer">40:00</span>
        </div>
      </div>

      <div id="subject-tag">Математика</div>
      <p id="question-text"></p>

      <div id="options-container"></div>

      <button id="next-button" class="big-button" disabled>Далее</button>
    </div>
  </div>

  <!-- Экран результата -->
  <div class="screen hidden" id="result-screen">
    <div class="container result-container">
      <h1>Тур завершён!</h1>
      <p class="result-text">Правильных ответов:</p>
      <p class="result-score" id="correct-count">0 из 15</p>
      <p class="result-percent" id="result-percent">0%</p>

      <button id="download-certificate" class="big-button">Скачать сертификат</button>
      <button id="back-home" class="big-button secondary">На главную</button>
    </div>
  </div>

  <!-- Модальное окно: Предупреждение перед туром -->
  <div class="modal hidden" id="warning-modal">
    <div class="modal-content">
      <h2>Внимание!</h2>
      <p>У вас будет 40 минут на 15 вопросов.</p>
      <p>Повтор тура невозможен даже при сбое связи или закрытии приложения.</p>
      <p>Результаты сохраняются автоматически после каждого ответа.</p>
      <p>Убедитесь, что интернет стабилен.</p>
      <div class="modal-buttons">
        <button id="confirm-start" class="big-button">Начать тур</button>
        <button id="cancel-start" class="big-button secondary">Отмена</button>
      </div>
    </div>
  </div>

  <!-- Модальное окно: О проекте -->
  <div class="modal hidden" id="about-modal">
    <div class="modal-content">
      <h2>О проекте</h2>
      <p>Межпредметная олимпиада Cambridge-уровня</p>
      <p>Это академическая олимпиада для школьников Узбекистана, задания которой выровнены по международным стандартам Cambridge IGCSE и AS Level и включают элементы SAT/IELTS-style reasoning.</p>
      <p><strong>Цели проекта:</strong></p>
      <ul>
        <li>Развитие критического мышления и аналитических навыков</li>
        <li>Подготовка к международным экзаменам и поступлению в топ-вузы</li>
        <li>Выявление талантливых учеников из всех регионов страны</li>
        <li>Добровольное участие в образовательных исследованиях</li>
      </ul>
      <p><strong>Особенности:</strong></p>
      <ul>
        <li>6 предметов: Математика, Химия, Биология, Информатика, Экономика, SAT/IELTS</li>
        <li>Один тур из 15 вопросов</li>
        <li>Автоматическая проверка и мгновенный результат</li>
        <li>Сертификат участника</li>
      </ul>
      <p>Проект реализуется с использованием современных технологий Telegram и Supabase для максимальной доступности.</p>
      <p>Организатор: [Твоё имя / организация]<br>2025–2026 учебный год</p>
      <button class="big-button" id="close-about">Закрыть</button>
    </div>
  </div>

  <script src="script.js?v=2"></script>
</body>
</html>
